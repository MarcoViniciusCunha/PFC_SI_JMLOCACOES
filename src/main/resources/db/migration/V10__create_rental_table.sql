CREATE TABLE rental (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    vehicle_placa VARCHAR(10) NOT NULL,
    customer_id BIGINT NOT NULL,
    start_date DATE NOT NULL,
    end_date DATE NOT NULL,
    return_date DATE DEFAULT NULL,
    price DECIMAL(10,2),
    returned BOOLEAN DEFAULT FALSE,
    status ENUM('ATIVA','DEVOLVIDA','ATRASADA', 'NAO_INICIADA') NOT NULL DEFAULT 'ATIVA',
    FOREIGN KEY (vehicle_placa) REFERENCES vehicle(placa),
    FOREIGN KEY (customer_id) REFERENCES customer(id)
);


INSERT INTO rental (vehicle_placa, customer_id, start_date, end_date, return_date, returned) VALUES
('CUR6F56', 3, '2025-11-01', '2025-11-08', '2025-11-08', TRUE),
('ZSV9E17', 5, '2025-11-05', '2025-11-15', NULL, FALSE),
('VNG2T45', 7, '2025-11-10', '2025-11-17', '2025-11-17', TRUE),
('YKI6T13', 8, '2025-11-12', '2025-11-20', NULL, FALSE),
('VLR9T44', 12, '2025-11-15', '2025-11-23', '2025-11-23', TRUE),
('XAU7J46', 15, '2025-11-18', '2025-12-28', NULL, FALSE),
('VRU7V58', 16, '2025-11-20', '2025-11-27', '2025-11-27', TRUE),
('XIX8Y25', 17, '2025-11-22', '2025-12-12', NULL, FALSE),
('DJD1P39', 18, '2025-11-25', '2025-12-02', '2025-12-02', TRUE),
('UKA8Y99', 19, '2025-11-28', '2025-12-15', NULL, FALSE),
('BJL5N11', 20, '2025-12-01', '2025-12-09', '2025-12-09', TRUE),
('NBR8A19', 22, '2025-12-03', '2025-12-15', NULL, FALSE),
('LOD9V83', 23, '2025-12-05', '2025-12-13', '2025-12-13', TRUE),
('XTG3J72', 24, '2025-12-07', '2025-12-16', NULL, FALSE),
('KLJ3Y98', 25, '2025-12-10', '2025-12-17', '2025-12-17', TRUE),
('BYR7U81', 26, '2025-12-12', '2025-12-20', NULL, FALSE),
('BWC5Q14', 27, '2025-12-14', '2025-12-22', '2025-12-22', TRUE),
('XAU7J46', 28, '2025-12-16', '2025-12-26', NULL, FALSE),
('VLR9T44', 29, '2025-12-18', '2025-12-25', '2025-12-25', TRUE),
('CUR6F56', 30, '2025-12-20', '2025-12-28', NULL, FALSE),
('ZSV9E17', 31, '2025-09-01', '2025-09-08', '2025-09-08', TRUE),
('NBR8A19', 32, '2025-09-10', '2025-09-20', NULL, FALSE),
('BJL5N11', 33, '2025-09-20', '2025-09-27', '2025-09-27', TRUE),
('UKA8Y99', 34, '2025-09-29', '2025-12-12', NULL, FALSE),
('VRU7V58', 35, '2025-10-01', '2025-10-10', '2025-10-10', TRUE),
('XTG3J72', 36, '2025-10-05', '2025-12-20', NULL, FALSE),
('VNG2T45', 37, '2025-10-15', '2025-10-22', '2025-10-22', TRUE),
('KLJ3Y98', 38, '2025-10-20', '2025-12-18', NULL, FALSE),
('YKI6T13', 39, '2025-10-25', '2025-11-05', '2025-11-05', TRUE),
('LOD9V83', 40, '2025-10-30', '2025-11-08', '2025-11-08', TRUE),
('DJD1P39', 41, '2025-11-01', '2025-12-14', NULL, FALSE),
('CUR6F56', 42, '2025-11-05', '2025-12-15', NULL, FALSE),
('BYR7U81', 43, '2025-11-10', '2025-11-20', '2025-11-20', TRUE),
('UKA8Y99', 44, '2025-11-12', '2025-12-18', NULL, FALSE),
('NBR8A19', 45, '2025-11-15', '2025-11-25', '2025-11-25', TRUE),
('XTG3J72', 46, '2025-11-17', '2025-12-14', NULL, FALSE),
('KLJ3Y98', 47, '2025-11-20', '2025-12-18', NULL, FALSE),
('ZSV9E17', 48, '2025-11-22', '2025-11-29', '2025-11-29', TRUE),
('XIX8Y25', 49, '2025-11-23', '2025-12-12', NULL, FALSE),
('VLR9T44', 50, '2025-11-25', '2025-12-12', NULL, FALSE),
('VRU7V58', 1, '2025-11-26', '2025-12-15', NULL, FALSE),
('CUR6F56', 2, '2025-11-27', '2025-12-16', NULL, FALSE),
('XTG3J72', 3, '2025-11-28', '2025-12-17', NULL, FALSE),
('YKI6T13', 4, '2025-11-29', '2025-12-18', NULL, FALSE),
('UKA8Y99', 5, '2025-12-01', '2025-12-20', NULL, FALSE),
('BJL5N11', 6, '2025-12-02', '2025-12-15', NULL, FALSE),
('LOD9V83', 7, '2025-12-03', '2025-12-13', NULL, FALSE),
('BYR7U81', 8, '2025-12-04', '2025-12-11', NULL, FALSE),
('KLJ3Y98', 9, '2025-12-05', '2025-12-15', NULL, FALSE),
('VNG2T45', 10, '2025-12-06', '2025-12-14', NULL, FALSE),
('ZSV9E17', 11, '2025-12-07', '2025-12-17', NULL, FALSE),
('CUR6F56', 12, '2025-12-08', '2025-12-16', NULL, FALSE),
('YKI6T13', 13, '2025-12-09', '2025-12-18', NULL, FALSE),
('XAU7J46', 14, '2025-12-10', '2025-12-20', NULL, FALSE),
('VLR9T44', 15, '2025-12-11', '2025-12-21', NULL, FALSE),
('VRU7V58', 16, '2025-12-12', '2025-12-22', NULL, FALSE),
('DJD1P39', 17, '2025-12-13', '2025-12-23', NULL, FALSE),
('BJL5N11', 18, '2025-12-14', '2025-12-24', NULL, FALSE),
('UKA8Y99', 19, '2025-12-15', '2025-12-25', NULL, FALSE),
('XTG3J72', 20, '2025-12-16', '2025-12-26', NULL, FALSE),
('NBR8A19', 21, '2025-12-17', '2025-12-27', NULL, FALSE),
('BYR7U81', 22, '2025-12-18', '2025-12-28', NULL, FALSE),
('KLJ3Y98', 23, '2025-12-19', '2025-12-29', NULL, FALSE),
('VNG2T45', 24, '2025-12-20', '2025-12-30', NULL, FALSE),
('ZSV9E17', 25, '2025-12-21', '2025-12-31', NULL, FALSE),
('CUR6F56', 26, '2025-12-22', '2025-12-31', NULL, FALSE),
('YKI6T13', 27, '2025-12-23', '2026-01-02', NULL, FALSE),
('XAU7J46', 28, '2025-12-24', '2026-01-03', NULL, FALSE),
('VLR9T44', 29, '2025-12-25', '2026-01-04', NULL, FALSE),
('VRU7V58', 30, '2025-12-26', '2026-01-05', NULL, FALSE),
('DJD1P39', 31, '2025-12-27', '2026-01-06', NULL, FALSE),
('BJL5N11', 32, '2025-12-28', '2026-01-07', NULL, FALSE),
('UKA8Y99', 33, '2025-12-29', '2026-01-08', NULL, FALSE),
('XTG3J72', 34, '2025-12-30', '2026-01-09', NULL, FALSE),
('NBR8A19', 35, '2025-12-31', '2026-01-10', NULL, FALSE),
('BYR7U81', 36, '2026-01-01', '2026-01-11', NULL, FALSE),
('KLJ3Y98', 37, '2026-01-02', '2026-01-12', NULL, FALSE),
('VNG2T45', 38, '2026-01-03', '2026-01-13', NULL, FALSE),
('ZSV9E17', 39, '2026-01-04', '2026-01-14', NULL, FALSE),
('CUR6F56', 40, '2026-01-05', '2026-01-15', NULL, FALSE),
('YKI6T13', 41, '2026-01-06', '2026-01-16', NULL, FALSE),
('XAU7J46', 42, '2026-01-07', '2026-01-17', NULL, FALSE),
('VLR9T44', 43, '2026-01-08', '2026-01-18', NULL, FALSE),
('VRU7V58', 44, '2026-01-09', '2026-01-19', NULL, FALSE),
('DJD1P39', 45, '2026-01-10', '2026-01-20', NULL, FALSE),
('BJL5N11', 46, '2026-01-11', '2026-01-21', NULL, FALSE),
('UKA8Y99', 47, '2026-01-12', '2026-01-22', NULL, FALSE),
('XTG3J72', 48, '2026-01-13', '2026-01-23', NULL, FALSE),
('NBR8A19', 49, '2026-01-14', '2026-01-24', NULL, FALSE),
('BYR7U81', 50, '2026-01-15', '2026-01-25', NULL, FALSE);

UPDATE rental r
JOIN vehicle v ON v.placa = r.vehicle_placa
SET r.price = DATEDIFF(r.end_date, r.start_date) * v.valor_diario
WHERE r.price IS NULL;
